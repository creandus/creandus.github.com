<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>Creandus Data Files Format Spec</title>
<meta name="author" content="Mike Kelly &lt;pioto&#64;pioto.org&gt;" />
<meta name="date" content="2007-12-25" />
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="creandus-data-files-format-spec">
<h1 class="title">Creandus Data Files Format Spec</h1>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name" />
<col class="docinfo-content" />
<tbody valign="top">
<tr><th class="docinfo-name">Author:</th>
<td>Mike Kelly &lt;<a class="reference" href="mailto:pioto&#64;pioto.org">pioto&#64;pioto.org</a>&gt;</td></tr>
<tr><th class="docinfo-name">Date:</th>
<td>2007-12-25</td></tr>
<tr><th class="docinfo-name">Revision:</th>
<td>228</td></tr>
<tr><th class="docinfo-name">Version:</th>
<td>0.6.0</td></tr>
</tbody>
</table>
<div class="section">
<h1><a id="introduction" name="introduction">Introduction</a></h1>
<p>One of the main points of creandus is to provide an easy way for package
maintainers to manage the users and groups their packages need. This is done
by creating the proper <em>data files</em>. This document describes their format, and
provides some examples.</p>
</div>
<div class="section">
<h1><a id="specifications" name="specifications">Specifications</a></h1>
<p>All the description files follow a simple format. Lines beginning with a hash
mark (&quot;#&quot;), or blank lines are comments. Other lines are of the format:</p>
<pre class="literal-block">
key: value
</pre>
<p>When looking for the data for a user, first the file
<tt class="docutils literal"><span class="pre">PROFILEDIR/accounts/user/${USERNAME}</span></tt> is checked, where <em>PROFILEDIR</em> is a
directory in a cascading portage profile tree, and <em>USERNAME</em> is the name of the
user being searched for. After cascading through all parents of <em>PROFILEDIR</em>
looking for lower-priority <tt class="docutils literal"><span class="pre">acccounts/user/${USERNAME}</span></tt> file, any keys which
are not yet determined then be looked up in the profile defaults file,
<tt class="docutils literal"><span class="pre">PROFILEDIR/accounts/defaults</span></tt>, which contains all the default values for the
keys.  Again, it will be found by cascading through all parents of <em>PROFILEDIR</em>.</p>
<div class="section">
<h2><a id="users" name="users">Users</a></h2>
<p>The users files contain the following keys:</p>
<blockquote>
<dl class="docutils">
<dt>uid</dt>
<dd>The range specification for the numeric group id of the group. A range
specification consists of a lower and upper bound, like <tt class="docutils literal"><span class="pre">25-35</span></tt>, or of a
single number, like <tt class="docutils literal"><span class="pre">1234</span></tt>. Creandus will use the first available number
in that range. If none in that range are available, it will exit with
failure.</dd>
<dt>shell</dt>
<dd>The default shell for the user. It would often be best to not specify this,
so that creandus will use the proper default for your profile.</dd>
<dt>home</dt>
<dd>The home directory for the user. As with shell, it is sometimes best to not
specify this unless specifically needed, and to instead let creandus use the
profile's defaults.</dd>
<dt>groups</dt>
<dd>A comma-separated list of groups this user should belong to, with the first
listed group being its default group.</dd>
<dt>comment</dt>
<dd>The GECOS comment field for the user. Should be something like &quot;user for
running misc-apps/foo-server&quot; (quotes unnecessary).</dd>
</dl>
</blockquote>
</div>
<div class="section">
<h2><a id="groups" name="groups">Groups</a></h2>
<p>The groups files contain only one key:</p>
<blockquote>
<dl class="docutils">
<dt>gid</dt>
<dd>The range specification for the numeric group id of the group. As with <em>uid</em>
above, a range specification consists of a lower and upper bound, like
<tt class="docutils literal"><span class="pre">25-35</span></tt>, or of a single number, like <tt class="docutils literal"><span class="pre">1234</span></tt>. Creandus will use the first
available number in that range. If none in that range are available, it will
exit with failure.</dd>
</dl>
</blockquote>
</div>
</div>
<div class="section">
<h1><a id="examples" name="examples">Examples</a></h1>
<p>This is a sample users data file, for the user &quot;foo&quot;:</p>
<pre class="literal-block">
# A sample user config file, for user &quot;foo&quot;
uid: 1234-1250
#shell: unspecified
home: /var/empty
groups: foo
comment: foo's user
</pre>
<p>Since the shell field is unspecified, the scripts will instead use a
less-specific default (for now, that would just be the default file,
<tt class="docutils literal"><span class="pre">accounts</span></tt>, although if this data gets placed into the portage tree, it will
become part of the cascading profiles).</p>
<p>And here is a sample file for foo's group, &quot;foo&quot;:</p>
<pre class="literal-block">
# A sample group config file, for group &quot;foo&quot;
gid: 1234
</pre>
<p>Finally, here is a sample <tt class="docutils literal"><span class="pre">defaults</span></tt> file, which contains the default values:</p>
<pre class="literal-block">
# Default account settings for the glep27-user/group tools
uid: 1-999
shell: /bin/false
home: /dev/null
groups:
comment: user created by portage
gid: 1-999
</pre>
<!-- vim: set ft=glep tw=80 spell spelllang=en et : -->
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="datafiles.txt">View document source</a>.
Generated on: 2008-03-26 18:11 UTC.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
